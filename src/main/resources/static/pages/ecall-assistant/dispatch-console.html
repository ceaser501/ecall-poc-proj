<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dispatch Console - e-Call AI.ssistant</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=3d8af1dddd94ffe1e0d8465532d945f2&libraries=services,drawing"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            background-color: #F5F7FA;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .header {
            background: white;
            border-bottom: 1px solid rgb(226, 232, 240);
        }

        .header-container {
            max-width: 2400px;
            margin: 0 auto;
            padding: 1rem 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .header-icon {
            background: linear-gradient(135deg, rgb(249, 115, 22) 0%, rgb(234, 88, 12) 100%);
            padding: 0.625rem;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .header-icon svg {
            width: 1.25rem;
            height: 1.25rem;
            color: white;
        }

        .header-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: rgb(15, 23, 42);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .header-user-info {
            position: relative;
            display: inline-block;
            margin-right: 1rem;
            cursor: pointer;
        }

        .header-user-name {
            font-size: 0.875rem;
            color: rgb(15, 23, 42);
            font-weight: 500;
        }

        .operator-status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
            margin-left: 8px;
            vertical-align: middle;
        }

        .operator-status-dot.on-call { background-color: #ef4444; box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.2); }
        .operator-status-dot.available { background-color: #22c55e; box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.2); }
        .operator-status-dot.away { background-color: #eab308; box-shadow: 0 0 0 2px rgba(234, 179, 8, 0.2); }

        .btn {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            font-weight: 500;
            border-radius: 0.375rem;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-icon {
            padding: 0.5rem;
            background: rgb(248, 250, 252);
            color: rgb(71, 85, 105);
            border: 1px solid rgb(226, 232, 240);
        }

        .btn-icon:hover {
            background: rgb(241, 245, 249);
        }

        .btn-icon svg {
            width: 20px;
            height: 20px;
        }

        .header-logout-btn {
            padding: 0.5rem 1rem;
            background: white;
            color: rgb(71, 85, 105);
            border: 1px solid rgb(226, 232, 240);
            border-radius: 0.375rem;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .header-logout-btn:hover {
            background: rgb(248, 250, 252);
        }

        .header-user-popup {
            display: none;
            position: absolute;
            top: calc(100% + 8px);
            right: 0;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            width: 280px;
            z-index: 1000;
            border: 1px solid #e2e8f0;
        }

        .header-user-info:hover .header-user-popup {
            display: block;
        }

        .panel-header {
            padding: 1rem 1.25rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .panel-title {
            font-size: 1rem;
            font-weight: 600;
            color: #0f172a;
        }

        .panel-body {
            padding: 1.25rem;
        }

        .operator-info {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.25rem;
        }

        .operator-avatar-lg {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            overflow: hidden;
            border: 2px solid #e2e8f0;
        }

        .operator-avatar-lg img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .operator-details {
            flex: 1;
        }

        .operator-name {
            font-size: 1rem;
            font-weight: 600;
            color: #0f172a;
            margin-bottom: 0.25rem;
        }

        .operator-dept,
        .operator-exp {
            font-size: 0.875rem;
            color: #64748b;
            margin-bottom: 0.125rem;
        }

        .status-selector {
            margin-top: 1rem;
        }

        .status-selector-label {
            font-size: 0.875rem;
            font-weight: 600;
            color: #64748b;
            display: block;
            margin-bottom: 0.5rem;
        }

        .status-options {
            display: flex;
            gap: 0.5rem;
        }

        .status-option {
            flex: 1;
            padding: 0.5rem;
            text-align: center;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            font-weight: 500;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s;
        }

        .status-option.on-call {
            background: #fef2f2;
            color: #dc2626;
        }

        .status-option.on-call.active {
            border-color: #dc2626;
            background: #fee2e2;
        }

        .status-option.available {
            background: #f0fdf4;
            color: #16a34a;
        }

        .status-option.available.active {
            border-color: #16a34a;
            background: #dcfce7;
        }

        .status-option.away {
            background: #fef9c3;
            color: #ca8a04;
        }

        .status-option.away.active {
            border-color: #ca8a04;
            background: #fef08a;
        }

        /* Context Bar */
        .context-bar {
            position: sticky;
            top: 0;
            z-index: 50;
            background: white;
            border-bottom: 1px solid #e5e7eb;
        }

        .context-bar-content {
            padding: 12px 24px;
        }

        .context-top-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .context-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .incident-badge {
            padding: 4px 12px;
            background: #1D4ED8;
            color: white;
            border-radius: 8px;
        }

        .priority-badge {
            padding: 4px 8px;
            background: #F59E0B;
            color: white;
            border-radius: 4px;
            font-size: 14px;
        }

        .context-right {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .context-bottom-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        /* Focus Toggle */
        .focus-toggle {
            display: inline-flex;
            border-radius: 12px;
            background: #F5F7FA;
            padding: 4px;
        }

        .focus-toggle button {
            padding: 6px 16px;
            border-radius: 8px;
            font-size: 14px;
            border: none;
            background: transparent;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.15s;
        }

        .focus-toggle button.active {
            background: white;
            color: #0F172A;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        /* Layer Chips */
        .layer-chips {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .layer-chip {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 14px;
            border: 1px solid #e5e7eb;
            background: white;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.15s;
        }

        .layer-chip.active {
            background: #1D4ED8;
            color: white;
            border-color: #1D4ED8;
        }

        /* Main Layout */
        .main-layout {
            display: flex;
            flex: 1;
            height: calc(100vh - 104px);
        }

        .left-panel {
            width: calc(33.333% - 8px);
            min-width: 380px;
            padding: 16px;
            overflow-y: auto;
        }

        .center-panel {
            flex: 1;
            padding: 16px;
            min-width: 500px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .right-dock {
            width: 280px;
            background: white;
            border-left: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
        }

        .right-dock.collapsed {
            width: 64px;
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .card h2 {
            color: #0F172A;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        /* Incident Panel */
        .incident-panel {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .assignment-card {
            margin-bottom: 16px;
        }

        .assignment-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .assignment-actions {
            display: flex;
            gap: 8px;
        }

        .btn-icon {
            padding: 6px;
            border-radius: 8px;
            border: none;
            background: transparent;
            cursor: pointer;
            transition: all 0.15s;
        }

        .btn-icon:hover {
            background: #F5F7FA;
        }

        .btn-primary {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 6px 12px;
            background: #1D4ED8;
            color: white;
            border-radius: 8px;
            border: none;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.15s;
        }

        .btn-primary:hover {
            background: #1e40af;
        }

        .assignment-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            border-radius: 12px;
            background: #F5F7FA;
            margin-bottom: 8px;
            transition: all 0.15s;
        }

        .assignment-row:hover {
            background: #e5e7eb;
        }

        .assignment-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .status-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 14px;
        }

        .assignment-actions-row {
            display: flex;
            gap: 8px;
        }

        .btn-text {
            padding: 4px 12px;
            font-size: 14px;
            border-radius: 8px;
            border: none;
            background: transparent;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.15s;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .btn-text:hover {
            background: white;
        }

        /* Timeline */
        .timeline {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .timeline-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .timeline-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: #DBEAFE;
            color: #1D4ED8;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .timeline-content {
            flex: 1;
            padding-top: 4px;
        }

        .timeline-time {
            font-size: 14px;
            color: #6b7280;
            margin-right: 8px;
        }

        .timeline-event {
            color: #0F172A;
        }

        /* Live Map */
        .live-map {
            height: 380px;
        }

        .map-container {
            position: relative;
            width: 100%;
            height: 310px;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid #e5e7eb;
        }

        /* Comms */
        .comms {
            height: 180px;
        }

        .messages-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 12px;
            height: 80px;
            overflow-y: auto;
        }

        .message {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            font-size: 14px;
            padding: 8px;
            border-radius: 8px;
        }

        .message.dispatch {
            background: #DBEAFE;
        }

        .message.unit {
            background: #F5F7FA;
        }

        .message-time {
            color: #6b7280;
            flex-shrink: 0;
        }

        .message-from {
            flex-shrink: 0;
        }

        .message.dispatch .message-from {
            color: #1D4ED8;
        }

        .message.unit .message-from {
            color: #0F172A;
        }

        .message-text {
            color: #374151;
        }

        .comms-input {
            display: flex;
            gap: 8px;
        }

        .comms-input input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
        }

        .comms-input input:focus {
            outline: none;
            border-color: #1D4ED8;
            box-shadow: 0 0 0 2px rgba(29, 78, 216, 0.1);
        }

        .comms-input button {
            padding: 8px 16px;
            background: #1D4ED8;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.15s;
        }

        .comms-input button:hover {
            background: #1e40af;
        }

        /* Global Quick View */
        .global-quick-view {
            display: flex;
            flex-direction: column;
        }

        .quick-view-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .quick-view-tabs {
            display: flex;
            gap: 4px;
            margin-bottom: 12px;
            background: #F5F7FA;
            border-radius: 8px;
            padding: 4px;
        }

        .quick-view-tab {
            flex: 1;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 14px;
            border: none;
            background: transparent;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.15s;
        }

        .quick-view-tab.active {
            background: white;
            color: #0F172A;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .quick-view-content {
            max-height: 120px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .quick-view-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.15s;
        }

        .quick-view-item:hover {
            background: #F5F7FA;
        }

        /* Right Dock */
        .right-dock-header {
            padding: 16px;
            border-bottom: 1px solid #e5e7eb;
        }

        .right-dock-header-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .right-dock-tabs {
            display: flex;
            gap: 4px;
            background: #F5F7FA;
            border-radius: 8px;
            padding: 4px;
        }

        .right-dock-tab {
            flex: 1;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 14px;
            border: none;
            background: transparent;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.15s;
        }

        .right-dock-tab.active {
            background: white;
            color: #0F172A;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .right-dock-search {
            padding: 16px;
            border-bottom: 1px solid #e5e7eb;
        }

        .search-input-wrapper {
            position: relative;
        }

        .search-input-wrapper svg {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            color: #9ca3af;
        }

        .search-input {
            width: 100%;
            padding: 8px 12px 8px 36px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
        }

        .search-input:focus {
            outline: none;
            border-color: #1D4ED8;
            box-shadow: 0 0 0 2px rgba(29, 78, 216, 0.1);
        }

        .right-dock-content {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }

        .right-dock-item {
            padding: 12px;
            border-radius: 12px;
            background: #F5F7FA;
            margin-bottom: 8px;
            transition: all 0.15s;
        }

        .right-dock-item:hover {
            background: #e5e7eb;
        }

        .right-dock-collapsed {
            width: 64px;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 16px 0;
            gap: 12px;
        }

        .right-dock-collapsed button {
            padding: 8px;
            border-radius: 8px;
            border: none;
            background: transparent;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.15s;
        }

        .right-dock-collapsed button:hover {
            background: #F5F7FA;
        }

        .right-dock-collapsed button.active {
            background: #1D4ED8;
            color: white;
        }

        /* Footer */
        .footer {
            position: sticky;
            bottom: 0;
            background: white;
            border-top: 1px solid #e5e7eb;
            padding: 10px 24px;
        }

        .footer-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 14px;
        }

        .footer-left {
            display: flex;
            align-items: center;
            gap: 24px;
        }

        .footer-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-item svg {
            width: 16px;
            height: 16px;
            color: #10B981;
        }

        .footer-status {
            color: #10B981;
        }

        .footer-right {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #6b7280;
        }

        .footer-right svg {
            width: 16px;
            height: 16px;
        }

        /* Utility Classes */
        .text-gray-500 { color: #6b7280; }
        .text-gray-600 { color: #4b5563; }
        .text-gray-700 { color: #374151; }
        .text-sm { font-size: 14px; }
        .text-xs { font-size: 12px; }
        .opacity-60 { opacity: 0.6; }
        .opacity-100 { opacity: 1; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-container">
            <div class="header-left">
                <div class="header-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="2"/><path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"/></svg>
                </div>
                <h1 class="header-title">Dispatch Console</h1>
            </div>

            <div class="header-right">
                <div class="header-user-info">
                    <span class="header-user-name" id="headerUserName">Loading...</span>
                    <span class="operator-status-dot available" id="operatorStatusDot"></span>
                    <div class="header-user-popup">
                        <div class="panel-header">
                            <h3 class="panel-title">Operator Information</h3>
                        </div>
                        <div class="panel-body">
                            <div class="operator-info">
                                <div class="operator-avatar-lg">
                                    <img id="headerOperatorAvatar" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64' viewBox='0 0 64 64'%3E%3Crect fill='%23e2e8f0' width='64' height='64'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='24' fill='%2364748b'%3E%3F%3C/text%3E%3C/svg%3E" alt="Operator">
                                </div>
                                <div class="operator-details">
                                    <p id="headerOperatorName" class="operator-name">Unknown</p>
                                    <p id="headerOperatorDept" class="operator-dept">N/A</p>
                                    <p id="headerOperatorExp" class="operator-exp">N/A</p>
                                </div>
                            </div>
                            <div class="status-selector">
                                <span class="status-selector-label">Status</span>
                                <div class="status-options">
                                    <div class="status-option on-call" onclick="changeOperatorStatus('on-call')">On Call</div>
                                    <div class="status-option available" onclick="changeOperatorStatus('available')">Available</div>
                                    <div class="status-option away" onclick="changeOperatorStatus('away')">Away</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="btn btn-icon" onclick="window.location.href='ecall-intro.html'">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                </button>
                <button class="btn btn-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg>
                </button>
                <button class="header-logout-btn" onclick="logout()">
                    Log Out
                </button>
            </div>
        </div>
    </div>

    <!-- Context Bar -->
    <div class="context-bar">
        <div class="context-bar-content">
            <div class="context-top-row">
                <div class="context-left">
                    <span class="incident-badge">INC A25-031</span>
                    <span class="priority-badge">P4 (High)</span>
                    <span>medical</span>
                    <span class="text-gray-500">•</span>
                    <span>Seoul Gangnam-gu Teheran-ro 152</span>
                    <span class="text-gray-500">•</span>
                    <div class="footer-item">
                        <i data-lucide="clock" style="width: 16px; height: 16px;"></i>
                        <span>Elapsed 04:12</span>
                    </div>
                </div>
                <div class="context-right">
                    <i data-lucide="users" style="width: 16px; height: 16px;" class="text-gray-600"></i>
                    <span>Units:</span>
                    <span style="color: #EF4444;">Fire 2</span>
                    <span class="text-gray-500">•</span>
                    <span style="color: #10B981;">EMS 3</span>
                    <span class="text-gray-500">•</span>
                    <span style="color: #1D4ED8;">Police 1</span>
                </div>
            </div>
            <div class="context-bottom-row">
                <div class="focus-toggle" id="focusToggle">
                    <button class="active" data-mode="incident">Incident Only</button>
                    <button data-mode="global">Global</button>
                    <button data-mode="both">Both</button>
                </div>
                <div class="layer-chips" id="layerChips">
                    <button class="layer-chip active" data-layer="units">
                        <i data-lucide="users" style="width: 16px; height: 16px;"></i>
                        <span>Units</span>
                    </button>
                    <button class="layer-chip active" data-layer="incidents">
                        <i data-lucide="alert-circle" style="width: 16px; height: 16px;"></i>
                        <span>Incidents</span>
                    </button>
                    <button class="layer-chip active" data-layer="routes">
                        <i data-lucide="route" style="width: 16px; height: 16px;"></i>
                        <span>Routes</span>
                    </button>
                    <button class="layer-chip" data-layer="traffic">
                        <i data-lucide="car" style="width: 16px; height: 16px;"></i>
                        <span>Traffic</span>
                    </button>
                    <button class="layer-chip" data-layer="geofence">
                        <i data-lucide="hexagon" style="width: 16px; height: 16px;"></i>
                        <span>Geofence</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Layout -->
    <div class="main-layout">
        <!-- Left Panel -->
        <div class="left-panel" id="leftPanel">
            <div class="incident-panel">
                <!-- Assignment Card -->
                <div class="card assignment-card">
                    <div class="assignment-header">
                        <h2>Assignment — This Incident</h2>
                        <div class="assignment-actions">
                            <button class="btn-icon">
                                <i data-lucide="plus" style="width: 16px; height: 16px;"></i>
                            </button>
                            <button class="btn-primary">
                                <i data-lucide="user-plus" style="width: 16px; height: 16px;"></i>
                                Request
                            </button>
                        </div>
                    </div>
                    <div id="assignmentsList">
                        <!-- Assignment rows will be inserted here -->
                    </div>
                </div>

                <!-- Timeline Card -->
                <div class="card">
                    <h2>Incident Timeline</h2>
                    <div class="timeline" id="timelineList">
                        <!-- Timeline items will be inserted here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Center Panel -->
        <div class="center-panel">
            <!-- Live Map with Kakao Map -->
            <div class="card live-map">
                <h2>Live Map</h2>
                <div class="map-container" id="mapContainer">
                    <!-- Kakao Map will be rendered here -->
                </div>
            </div>

            <!-- Comms -->
            <div class="card comms">
                <h2>Communications</h2>
                <div class="messages-container" id="messagesContainer">
                    <!-- Messages will be inserted here -->
                </div>
                <div class="comms-input">
                    <input type="text" placeholder="Message…" id="messageInput">
                    <button id="sendButton">
                        <i data-lucide="send" style="width: 16px; height: 16px;"></i>
                    </button>
                    <button>
                        <i data-lucide="chevron-down" style="width: 16px; height: 16px;"></i>
                    </button>
                </div>
            </div>

            <!-- Global Quick View -->
            <div class="card global-quick-view" id="globalQuickView">
                <div class="quick-view-header">
                    <h2>Global Quick View</h2>
                    <button class="btn-icon" id="collapseQuickView">
                        <i data-lucide="chevron-up" style="width: 16px; height: 16px;"></i>
                    </button>
                </div>
                <div class="quick-view-tabs">
                    <button class="quick-view-tab active" data-tab="units">All Units</button>
                    <button class="quick-view-tab" data-tab="incidents">Incidents</button>
                </div>
                <div class="quick-view-content" id="quickViewContent">
                    <!-- Quick view items will be inserted here -->
                </div>
            </div>
        </div>

        <!-- Right Dock -->
        <div class="right-dock" id="rightDock">
            <div class="right-dock-header">
                <div class="right-dock-header-top">
                    <h2>Global View</h2>
                    <button class="btn-icon" id="collapseRightDock">
                        <i data-lucide="chevron-right" style="width: 20px; height: 20px;"></i>
                    </button>
                </div>
                <div class="right-dock-tabs">
                    <button class="right-dock-tab active" data-tab="roster">Roster</button>
                    <button class="right-dock-tab" data-tab="incidents">Incidents</button>
                </div>
            </div>
            <div class="right-dock-search">
                <div class="search-input-wrapper">
                    <i data-lucide="search" style="width: 16px; height: 16px;"></i>
                    <input type="text" class="search-input" placeholder="Search..." id="searchInput">
                </div>
            </div>
            <div class="right-dock-content" id="rightDockContent">
                <!-- Right dock items will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <div class="footer-content">
            <div class="footer-left">
                <div class="footer-item">
                    <i data-lucide="check-circle" style="width: 16px; height: 16px;"></i>
                    <span class="text-gray-600">CAD:</span>
                    <span class="footer-status">OK</span>
                </div>
                <div class="footer-item">
                    <i data-lucide="radio" style="width: 16px; height: 16px;"></i>
                    <span class="text-gray-600">Radio:</span>
                    <span class="footer-status">OK</span>
                </div>
                <div class="footer-item">
                    <i data-lucide="map" style="width: 16px; height: 16px;"></i>
                    <span class="text-gray-600">Map:</span>
                    <span class="footer-status">OK</span>
                </div>
            </div>
            <div class="footer-right">
                <i data-lucide="clock" style="width: 16px; height: 16px;"></i>
                <span>Last update 2s ago</span>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // State
        let focusMode = 'both';
        let activeLayers = {
            units: true,
            incidents: true,
            routes: true,
            traffic: false,
            geofence: false
        };
        let rightDockExpanded = true;
        let quickViewCollapsed = false;
        let selectedUnit = null;
        let activeTab = 'units';
        let rightDockTab = 'roster';
        let searchQuery = '';
        let map = null;
        let markers = [];

        // Data
        const assignments = [
            { id: 'EMS-1', type: 'EMS', status: 'en-route', eta: 6 },
            { id: 'Fire-3', type: 'Fire', status: 'dispatched', eta: 8 },
            { id: 'Police-2', type: 'Police', status: 'on-scene' }
        ];

        const timelineEvents = [
            { time: '10:12', event: 'Dispatch' },
            { time: '10:22', event: 'En-route' },
            { time: '10:29', event: 'Arrived' },
            { time: '10:31', event: 'EMS-1 On Scene' },
            { time: '10:34', event: 'Fire-3 Dispatched' }
        ];

        const units = [
            { id: 'EMS-1', type: 'EMS', status: 'en-route', lat: 37.5050, lng: 127.0490, incident: 'A25', priority: 'P4', eta: 6 },
            { id: 'Fire-3', type: 'Fire', status: 'dispatched', lat: 37.4950, lng: 127.0390, incident: 'A25', priority: 'P4', eta: 8 },
            { id: 'Police-2', type: 'Police', status: 'on-scene', lat: 37.5059, lng: 127.0530, incident: 'A25', priority: 'P4' },
            { id: 'EMS-5', type: 'EMS', status: 'available', lat: 37.5159, lng: 127.0630 },
            { id: 'Fire-1', type: 'Fire', status: 'on-scene', lat: 37.5259, lng: 127.0730, incident: 'B07', priority: 'P3' }
        ];

        const messages = [
            { time: '10:31', from: 'EMS-1', message: 'Arriving via Gate 3', type: 'unit' },
            { time: '10:32', from: 'Dispatch', message: 'Use south access', type: 'dispatch' },
            { time: '10:33', from: 'Fire-3', message: 'En route, ETA 8 minutes', type: 'unit' },
            { time: '10:34', from: 'Dispatch', message: 'Traffic clear on Teheran-ro', type: 'dispatch' }
        ];

        const allUnits = [
            { id: 'EMS-1', status: 'En-route', eta: 6, incident: 'A25', location: 'Teheran-ro 152' },
            { id: 'Fire-3', status: 'Dispatched', eta: 8, incident: 'A25', location: 'Teheran-ro 152' },
            { id: 'Police-2', status: 'On-scene', incident: 'A25', location: 'Teheran-ro 152' },
            { id: 'EMS-5', status: 'Available' },
            { id: 'Fire-1', status: 'On-scene', incident: 'B07', location: 'Olympic-daero' }
        ];

        const allIncidents = [
            { id: 'A25', priority: 'P4', type: 'medical', location: 'Teheran-ro 152', status: 'Active', lat: 37.5059, lng: 127.0530 },
            { id: 'B07', priority: 'P3', type: 'traffic', location: 'Olympic-daero', status: 'Transport', lat: 37.5259, lng: 127.0730 }
        ];

        const statusConfig = {
            available: { label: 'Available', color: '#10B981', bgColor: '#D1FAE5' },
            dispatched: { label: 'Dispatched', color: '#38BDF8', bgColor: '#E0F2FE' },
            'en-route': { label: 'En-route', color: '#F59E0B', bgColor: '#FEF3C7' },
            'on-scene': { label: 'On-scene', color: '#1D4ED8', bgColor: '#DBEAFE' },
            transport: { label: 'Transport', color: '#8B5CF6', bgColor: '#EDE9FE' },
            clear: { label: 'Clear', color: '#6B7280', bgColor: '#F3F4F6' }
        };

        // Initialize Kakao Map
        function initializeMap() {
            if (typeof kakao === 'undefined' || typeof kakao.maps === 'undefined') {
                console.error("Kakao Maps API not loaded.");
                document.getElementById('mapContainer').innerHTML = '<div style="padding: 20px; text-align: center; color: red;">Kakao Maps API could not be loaded.</div>';
                return;
            }

            const mapContainer = document.getElementById('mapContainer');
            const mapOption = {
                center: new kakao.maps.LatLng(37.5059, 127.0530), // Seoul Gangnam
                level: 5
            };

            map = new kakao.maps.Map(mapContainer, mapOption);
            renderMapMarkers();
        }

        function renderMapMarkers() {
            if (!map) return;

            // Clear existing markers
            markers.forEach(marker => marker.setMap(null));
            markers = [];

            const visibleUnits = focusMode === 'incident' 
                ? units.filter(u => u.incident === 'A25')
                : units;

            // Add incident marker
            if (activeLayers.incidents) {
                allIncidents.forEach(incident => {
                    const position = new kakao.maps.LatLng(incident.lat, incident.lng);
                    const content = `<div style="padding:5px;background:#EF4444;color:white;border-radius:4px;font-size:12px;font-weight:bold;">${incident.id}</div>`;
                    const customOverlay = new kakao.maps.CustomOverlay({
                        position: position,
                        content: content,
                        yAnchor: 1
                    });
                    customOverlay.setMap(map);
                });
            }

            // Add unit markers
            if (activeLayers.units) {
                visibleUnits.forEach(unit => {
                    const position = new kakao.maps.LatLng(unit.lat, unit.lng);
                    const statusColor = statusConfig[unit.status]?.color || '#6B7280';
                    const content = `<div style="padding:5px 10px;background:${statusColor};color:white;border-radius:6px;font-size:12px;font-weight:bold;box-shadow:0 2px 4px rgba(0,0,0,0.2);">${unit.id}</div>`;
                    
                    const customOverlay = new kakao.maps.CustomOverlay({
                        position: position,
                        content: content,
                        yAnchor: 1
                    });
                    customOverlay.setMap(map);
                    markers.push(customOverlay);
                });
            }
        }

        // Render functions
        function renderAssignments() {
            const container = document.getElementById('assignmentsList');
            container.innerHTML = assignments.map(assignment => {
                const config = statusConfig[assignment.status];
                const showRecallReassign = assignment.status === 'dispatched' || assignment.status === 'en-route';
                const showClear = assignment.status === 'on-scene';
                
                return `
                    <div class="assignment-row">
                        <div class="assignment-info">
                            <span>${assignment.id}</span>
                            <span class="text-gray-500">•</span>
                            <span class="status-badge" style="color: ${config.color}; background: ${config.bgColor};">
                                ${config.label}
                            </span>
                            ${assignment.eta ? `
                                <span class="text-gray-500">•</span>
                                <span class="text-sm text-gray-600">ETA ${assignment.eta.toString().padStart(2, '0')} min</span>
                            ` : ''}
                        </div>
                        <div class="assignment-actions-row">
                            ${showRecallReassign ? `
                                <button class="btn-text">
                                    <i data-lucide="arrow-left" style="width: 12px; height: 12px;"></i>
                                    Reassign
                                </button>
                                <button class="btn-text">
                                    <i data-lucide="x" style="width: 12px; height: 12px;"></i>
                                    Recall
                                </button>
                            ` : ''}
                            ${showClear ? `
                                <button class="btn-text">
                                    <i data-lucide="arrow-left" style="width: 12px; height: 12px;"></i>
                                    Reassign
                                </button>
                                <button class="btn-text">
                                    <i data-lucide="check-circle" style="width: 12px; height: 12px;"></i>
                                    Clear
                                </button>
                            ` : ''}
                        </div>
                    </div>
                `;
            }).join('');
            lucide.createIcons();
        }

        function renderTimeline() {
            const container = document.getElementById('timelineList');
            container.innerHTML = timelineEvents.map(event => `
                <div class="timeline-item">
                    <div class="timeline-icon">
                        <i data-lucide="clock" style="width: 16px; height: 16px;"></i>
                    </div>
                    <div class="timeline-content">
                        <span class="timeline-time">${event.time}</span>
                        <span class="timeline-event">${event.event}</span>
                    </div>
                </div>
            `).join('');
            lucide.createIcons();
        }

        function renderMessages() {
            const container = document.getElementById('messagesContainer');
            container.innerHTML = messages.map(msg => `
                <div class="message ${msg.type}">
                    <span class="message-time">[${msg.time}</span>
                    <span class="message-from">${msg.from}]</span>
                    <span class="message-text">${msg.message}</span>
                </div>
            `).join('');
        }

        function renderQuickView() {
            if (quickViewCollapsed) return;
            
            const container = document.getElementById('quickViewContent');
            if (activeTab === 'units') {
                container.innerHTML = allUnits.map(unit => `
                    <div class="quick-view-item">
                        <div style="display: flex; align-items: center; gap: 8px; flex: 1;">
                            <span>${unit.id}</span>
                            <span class="text-gray-500">•</span>
                            <span class="text-gray-600">${unit.status}</span>
                            ${unit.eta ? `
                                <span class="text-gray-500">•</span>
                                <span class="text-gray-600">ETA ${unit.eta}</span>
                            ` : ''}
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            ${unit.incident ? `
                                <span class="text-sm text-gray-600">INC ${unit.incident} (${unit.location})</span>
                            ` : '<span class="text-sm text-gray-500">—</span>'}
                            <button class="btn-icon" onclick="focusOnUnit('${unit.id}')">
                                <i data-lucide="play" style="width: 16px; height: 16px;"></i>
                            </button>
                        </div>
                    </div>
                `).join('');
            } else {
                container.innerHTML = allIncidents.map(incident => `
                    <div class="quick-view-item">
                        <span>${incident.id}</span>
                        <span class="text-gray-500">|</span>
                        <span class="status-badge" style="background: #FEF3C7; color: #F59E0B;">${incident.priority}</span>
                        <span class="text-gray-600">${incident.type}</span>
                        <span class="text-gray-500">|</span>
                        <span class="text-gray-600">${incident.location}</span>
                        <span class="text-gray-500">|</span>
                        <span style="color: #10B981;">${incident.status}</span>
                    </div>
                `).join('');
            }
            lucide.createIcons();
        }

        function renderRightDock() {
            if (!rightDockExpanded) {
                const dock = document.getElementById('rightDock');
                dock.className = 'right-dock collapsed';
                dock.innerHTML = `
                    <button onclick="toggleRightDock()">
                        <i data-lucide="chevron-left" style="width: 20px; height: 20px;"></i>
                    </button>
                    <button class="${rightDockTab === 'roster' ? 'active' : ''}" onclick="setRightDockTab('roster'); toggleRightDock();">
                        <i data-lucide="users" style="width: 20px; height: 20px;"></i>
                    </button>
                    <button class="${rightDockTab === 'incidents' ? 'active' : ''}" onclick="setRightDockTab('incidents'); toggleRightDock();">
                        <i data-lucide="alert-circle" style="width: 20px; height: 20px;"></i>
                    </button>
                `;
                lucide.createIcons();
                return;
            }

            const dock = document.getElementById('rightDock');
            dock.className = 'right-dock';
            dock.innerHTML = `
                <div class="right-dock-header">
                    <div class="right-dock-header-top">
                        <h2>Global View</h2>
                        <button class="btn-icon" onclick="toggleRightDock()">
                            <i data-lucide="chevron-right" style="width: 20px; height: 20px;"></i>
                        </button>
                    </div>
                    <div class="right-dock-tabs">
                        <button class="right-dock-tab ${rightDockTab === 'roster' ? 'active' : ''}" onclick="setRightDockTab('roster')">Roster</button>
                        <button class="right-dock-tab ${rightDockTab === 'incidents' ? 'active' : ''}" onclick="setRightDockTab('incidents')">Incidents</button>
                    </div>
                </div>
                <div class="right-dock-search">
                    <div class="search-input-wrapper">
                        <i data-lucide="search" style="width: 16px; height: 16px;"></i>
                        <input type="text" class="search-input" placeholder="Search..." id="searchInput" oninput="handleSearch(event)">
                    </div>
                </div>
                <div class="right-dock-content" id="rightDockContent">
                    ${renderRightDockContent()}
                </div>
            `;
            lucide.createIcons();
        }

        function renderRightDockContent() {
            if (rightDockTab === 'roster') {
                const filtered = allUnits.filter(u => 
                    u.id.toLowerCase().includes(searchQuery.toLowerCase()) ||
                    u.status.toLowerCase().includes(searchQuery.toLowerCase())
                );
                return filtered.map(unit => `
                    <div class="right-dock-item">
                        <div style="display: flex; align-items: flex-start; justify-content: space-between; margin-bottom: 8px;">
                            <div>
                                <div style="color: #0F172A; margin-bottom: 4px;">${unit.id}</div>
                                <div class="text-sm text-gray-600">${unit.status}</div>
                                ${unit.eta ? `<div class="text-sm text-gray-600">ETA: ${unit.eta} min</div>` : ''}
                            </div>
                            <button class="btn-icon" onclick="focusOnUnit('${unit.id}')">
                                <i data-lucide="play" style="width: 16px; height: 16px;"></i>
                            </button>
                        </div>
                        ${unit.incident ? `
                            <div class="text-sm text-gray-600" style="padding-top: 8px; border-top: 1px solid #e5e7eb;">
                                INC ${unit.incident} • ${unit.location}
                            </div>
                        ` : ''}
                    </div>
                `).join('');
            } else {
                return allIncidents.map(incident => `
                    <div class="right-dock-item">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                            <span style="color: #0F172A;">${incident.id}</span>
                            <span class="status-badge" style="background: #FEF3C7; color: #F59E0B;">${incident.priority}</span>
                        </div>
                        <div class="text-sm text-gray-600" style="margin-bottom: 4px;">${incident.type}</div>
                        <div class="text-sm text-gray-600" style="margin-bottom: 8px;">${incident.location}</div>
                        <div style="display: flex; align-items: center; justify-content: space-between; padding-top: 8px; border-top: 1px solid #e5e7eb;">
                            <span class="text-sm" style="color: #10B981;">${incident.status}</span>
                            <button class="btn-icon">
                                <i data-lucide="play" style="width: 16px; height: 16px;"></i>
                            </button>
                        </div>
                    </div>
                `).join('');
            }
        }

        // Event handlers
        function updateFocusMode() {
            document.querySelectorAll('#focusToggle button').forEach(btn => {
                if (btn.dataset.mode === focusMode) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });

            const leftPanel = document.getElementById('leftPanel');
            if (focusMode === 'global') {
                leftPanel.style.opacity = '0.6';
            } else {
                leftPanel.style.opacity = '1';
            }

            const rightDock = document.getElementById('rightDock');
            if (focusMode === 'incident') {
                rightDock.style.display = 'none';
            } else {
                rightDock.style.display = 'flex';
            }

            const quickView = document.getElementById('globalQuickView');
            if (focusMode === 'incident') {
                quickView.style.display = 'none';
            } else {
                quickView.style.display = 'block';
            }

            renderMapMarkers();
        }

        function setFocusMode(mode) {
            focusMode = mode;
            if (mode === 'incident') {
                rightDockExpanded = false;
            } else if (mode === 'both') {
                rightDockExpanded = true;
            }
            updateFocusMode();
            renderRightDock();
        }

        function toggleLayer(layer) {
            activeLayers[layer] = !activeLayers[layer];
            document.querySelectorAll('#layerChips .layer-chip').forEach(chip => {
                if (chip.dataset.layer === layer) {
                    if (activeLayers[layer]) {
                        chip.classList.add('active');
                    } else {
                        chip.classList.remove('active');
                    }
                }
            });
            renderMapMarkers();
        }

        function toggleRightDock() {
            rightDockExpanded = !rightDockExpanded;
            renderRightDock();
        }

        function setRightDockTab(tab) {
            rightDockTab = tab;
            renderRightDock();
        }

        function handleSearch(e) {
            searchQuery = e.target.value;
            const content = document.getElementById('rightDockContent');
            if (content) {
                content.innerHTML = renderRightDockContent();
                lucide.createIcons();
            }
        }

        function setQuickViewTab(tab) {
            activeTab = tab;
            document.querySelectorAll('.quick-view-tab').forEach(btn => {
                if (btn.dataset.tab === tab) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
            renderQuickView();
        }

        function toggleQuickView() {
            quickViewCollapsed = !quickViewCollapsed;
            const quickView = document.getElementById('globalQuickView');
            if (quickViewCollapsed) {
                quickView.innerHTML = `
                    <button style="width: 100%; background: white; border-radius: 16px; padding: 12px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); border: none; cursor: pointer; display: flex; align-items: center; justify-content: space-between;" onclick="toggleQuickView()">
                        <span style="color: #0F172A;">Global Quick View</span>
                        <i data-lucide="chevron-down" style="width: 16px; height: 16px; color: #6b7280;"></i>
                    </button>
                `;
            } else {
                quickView.innerHTML = `
                    <div class="quick-view-header">
                        <h2>Global Quick View</h2>
                        <button class="btn-icon" onclick="toggleQuickView()">
                            <i data-lucide="chevron-up" style="width: 16px; height: 16px;"></i>
                        </button>
                    </div>
                    <div class="quick-view-tabs">
                        <button class="quick-view-tab ${activeTab === 'units' ? 'active' : ''}" data-tab="units" onclick="setQuickViewTab('units')">All Units</button>
                        <button class="quick-view-tab ${activeTab === 'incidents' ? 'active' : ''}" data-tab="incidents" onclick="setQuickViewTab('incidents')">Incidents</button>
                    </div>
                    <div class="quick-view-content" id="quickViewContent"></div>
                `;
                renderQuickView();
            }
            lucide.createIcons();
        }

        function focusOnUnit(unitId) {
            const unit = units.find(u => u.id === unitId);
            if (unit && map) {
                const position = new kakao.maps.LatLng(unit.lat, unit.lng);
                map.setCenter(position);
                map.setLevel(3);
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Focus toggle
            document.querySelectorAll('#focusToggle button').forEach(btn => {
                btn.onclick = () => setFocusMode(btn.dataset.mode);
            });

            // Layer chips
            document.querySelectorAll('#layerChips .layer-chip').forEach(chip => {
                chip.onclick = () => toggleLayer(chip.dataset.layer);
            });

            // Quick view tabs
            document.querySelectorAll('.quick-view-tab').forEach(btn => {
                btn.onclick = () => setQuickViewTab(btn.dataset.tab);
            });

            // Right dock tabs
            document.querySelectorAll('.right-dock-tab').forEach(btn => {
                btn.onclick = () => setRightDockTab(btn.dataset.tab);
            });

            // Send message
            document.getElementById('sendButton').onclick = () => {
                const input = document.getElementById('messageInput');
                if (input.value.trim()) {
                    messages.push({
                        time: new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false }),
                        from: 'Dispatch',
                        message: input.value,
                        type: 'dispatch'
                    });
                    input.value = '';
                    renderMessages();
                }
            };

            // Initial render
            renderAssignments();
            renderTimeline();
            renderMessages();
            renderQuickView();
            renderRightDock();
            updateFocusMode();
            initializeMap();

            // Update last update time
            setInterval(() => {
                const footerRight = document.querySelector('.footer-right span');
                if (footerRight) {
                    footerRight.textContent = 'Last update ' + Math.floor(Math.random() * 5 + 1) + 's ago';
                }
            }, 2000);

            // Load user info for header
            loadUserInfo();
        });

        // Header Functions
        function loadUserInfo() {
            const user = JSON.parse(sessionStorage.getItem('user'));
            if (user) {
                document.getElementById('headerUserName').textContent = user.name || user.username || 'User';
                document.getElementById('headerOperatorName').textContent = user.name || user.username || 'Unknown';
                document.getElementById('headerOperatorDept').textContent = user.department || user.organizationName || 'N/A';
                
                // Calculate experience from joinDate if available
                if (user.joinDate) {
                    const joinDate = new Date(user.joinDate.split('T')[0]);
                    const yearsDiff = new Date().getFullYear() - joinDate.getFullYear();
                    document.getElementById('headerOperatorExp').textContent = `${yearsDiff} year${yearsDiff !== 1 ? 's' : ''} exp.`;
                } else {
                    document.getElementById('headerOperatorExp').textContent = user.experience || 'N/A';
                }

                // Set avatar image
                const headerOperatorAvatar = document.getElementById('headerOperatorAvatar');
                if (headerOperatorAvatar) {
                    if (user.photoUrl) {
                        headerOperatorAvatar.src = user.photoUrl;
                    } else {
                        // Use default operator image based on operatorId or name
                        const operatorNum = user.operatorId ? (parseInt(user.operatorId) % 3) + 1 : 1;
                        headerOperatorAvatar.src = `/assets/images/portraits/operator${operatorNum}.png`;
                    }
                }

                // Set default status
                changeOperatorStatus('available');
            }
        }

        function changeOperatorStatus(status) {
            const dot = document.getElementById('operatorStatusDot');
            const options = document.querySelectorAll('.status-option');

            // Remove all status classes from dot
            dot.classList.remove('on-call', 'available', 'away');
            // Add new status
            dot.classList.add(status);

            // Update active option
            options.forEach(opt => {
                opt.classList.remove('active');
                if (opt.textContent.toLowerCase().replace(' ', '-') === status) {
                    opt.classList.add('active');
                }
            });
        }

        function logout() {
            sessionStorage.removeItem('user');
            window.location.href = 'ecall-intro.html';
        }
    </script>
</body>
</html>
